(this.webpackJsonpgraphs=this.webpackJsonpgraphs||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var o,i=n(1),s=n.n(i),a=n(13),r=n.n(a),c=(n(19),n(20),n(6)),l=n(9),u=n(2),d=n(3),h=n(10),f=n(4),v=n(5),p=n(14);!function(e){e.Default="#b8b8be",e.Black="#030b1f",e.Red="#16d867",e.Blue="#155cc7",e.Green="#16d867"}(o||(o={}));var g=o,m=n(0);var x=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o,i;return Object(u.a)(this,n),(o=t.call(this,e)).colorRef=void 0,o.state=(i=e,JSON.parse(JSON.stringify(i))),o.colorRef=s.a.createRef(),o}return Object(d.a)(n,[{key:"vertexcolor_onmouse",value:function(e){e.preventDefault()}},{key:"componentDidMount",value:function(){console.log("Mounted")}},{key:"fadeTo",value:function(e){var t=this.colorRef.current;this.setColor(e),t.style.backgroundColor=e}},{key:"render",value:function(){var e=this,t=Object(l.a)({background:this.state.color},"clip-path","url(".concat(this.state.vertexId,")"));return Object(m.jsx)("div",{ref:this.colorRef,className:"vertexColor",style:t,onMouseUp:function(t){return e.vertexcolor_onmouse(t)},onMouseDown:function(t){return e.vertexcolor_onmouse(t)}})}},{key:"styleInstantly",value:function(e,t){e.classList.add("notransition"),t();e.offsetHeight}},{key:"setColor",value:function(e){console.log("THIS",this),this.state={color:e,vertexId:this.state.vertexId},console.log("attempted set color")}},{key:"reset",value:function(){this.colorRef.current;this.fadeTo(g.Default)}}]),n}(s.a.Component);var k=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;Object(u.a)(this,n),(o=t.call(this,e)).colorRef=void 0;var i=e.index1,s=e.p,a=s.x,r=s.y,c=e.color,l=e.colorComponent,d=e.isStart,h=e.isGoal;return o.state={index1:i,p:{x:a,y:r},color:c,colorComponent:l,isStart:d,isGoal:h},o}return Object(d.a)(n,[{key:"componentWillMount",value:function(){this.fadeTo("orange")}},{key:"decrementIndex",value:function(){this.setState({index1:this.state.index1-1})}},{key:"setStart",value:function(){this.state&&this.setState({isStart:!0},(function(){console.log("set state successfully")})),console.log("tried to set state")}},{key:"unsetStart",value:function(){this.state&&this.setState({isStart:!1})}},{key:"setGoal",value:function(){this.state&&this.setState({isGoal:!0},(function(){console.log("set state successfully")})),console.log("tried to set state")}},{key:"unsetGoal",value:function(){this.state&&this.setState({isGoal:!1})}},{key:"vertex_onmouse",value:function(e){e.preventDefault(),e.vertexId=this.props.index1}},{key:"spacer_onclick",value:function(e){e.preventDefault(),e.hitSpacer=!0}},{key:"fadeTo",value:function(e){this.state.colorComponent.fadeTo(e);var t={};Object.assign(t,this.state,{color:e}),this.state=t}},{key:"renderVertexColor",value:function(){return this.props.colorComponent.render()}},{key:"reset",value:function(){this.state.colorComponent.reset(),this.setState({color:g.Default})}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"vertexOuter",style:{left:this.props.p.x,top:this.props.p.y},children:[this.renderVertexColor(),Object(m.jsx)("div",{className:"vertex"+(this.state.isStart?" startVertex":""),id:"vertex"+this.props.index1,onMouseUp:function(t){return e.vertex_onmouse(t)},onMouseDown:function(t){return e.vertex_onmouse(t)},children:Object(m.jsx)("div",{className:"vertexSpacer",onMouseDown:function(t){return e.spacer_onclick(t)}})})]},"vertex"+n.totalEverMade++)}}],[{key:"default",value:function(e,t,o){return new n({index1:e,p:{x:t,y:o},color:g.Default,colorComponent:new x({color:g.Default,vertexId:e}),isStart:!1})}}]),n}(s.a.Component);k.totalEverMade=0;var y,b=function(e,t,n){return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:t/Math.cos(e)-Math.tan(e)*n,y2:n}},S=function(){function e(){Object(u.a)(this,e),this.paths=[],this.offX=0,this.offY=0}return Object(d.a)(e,[{key:"moveTo",value:function(e,t){this.paths.push("M ".concat(e+this.offX," ").concat(t+this.offY))}},{key:"lineTo",value:function(e,t){this.paths.push("L ".concat(e+this.offX," ").concat(t+this.offY))}},{key:"curveTo",value:function(e,t,n,o,i,s){this.paths.push("C "+[e+this.offX,t+this.offY,n+this.offX,o+this.offY,i+this.offX,s+this.offY].join(" "))}},{key:"unroll",value:function(){return this.paths.join(" ").replaceAll(/\.\d+ /g," ")}}]),e}(),j=function(e,t,n,o,i,s){var a=new S;return a.offY=i,function(){var t=b(e,i,s),o=t.x1,r=t.y1,c=t.x2,l=t.y2;a.moveTo(0,0),a.lineTo(o,r),a.curveTo(c,l,c,l,n,s),a.lineTo(n,0),a.lineTo(0,0),a.lineTo(o,-r),a.curveTo(c,-l,c,-l,n,-s),a.lineTo(n,0),a.lineTo(0,0)}(),function(){var e=b(t,i,s),r=e.x1,c=e.y1,l=e.x2,u=e.y2;a.moveTo(o,0),a.lineTo(o-r,c),a.curveTo(o-l,u,o-l,u,n,s),a.lineTo(n,0),a.lineTo(o,0),a.lineTo(o-r,-c),a.curveTo(o-l,-u,o-l,-u,n,-s),a.lineTo(n,0),a.lineTo(o,0)}(),'path(nonzero, "'.concat(a.unroll(),'")')},O=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,o){var i;return Object(u.a)(this,n),(i=t.call(this,"Attempted to call ".concat(e," while edge was in stage ").concat(o))).name="ColorError",i}return n}(Object(p.a)(Error));!function(e){e[e.Solid=0]="Solid",e[e.Gradient=1]="Gradient"}(y||(y={}));var w,E=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;Object(u.a)(this,n),(o=t.call(this,e)).clipStates=[],o.w=void 0,o.h=void 0,o.length=void 0,o.left=void 0,o.top=void 0,o.angle=void 0,o.colorRef=void 0,o.state={clipState:0,color1:e.color1,color2:e.color2,backgroundMode:y.Solid},o.colorRef=s.a.createRef();var i=e.p1,a=e.p2;o.w=a.props.p.x-i.props.p.x,o.h=a.props.p.y-i.props.p.y,o.length=Math.hypot(o.w,o.h),o.left=i.props.p.x,o.top=i.props.p.y,o.angle=180*Math.atan2(o.h,o.w)/Math.PI;var r=o.length;return o.clipStates=[j(Math.PI/6,Math.PI/6,.5*r,r,30,3),j(2*Math.PI/5,Math.PI/6,.8*r,r,30,5),j(Math.PI/6,2*Math.PI/5,.3*r,r,30,5),j(2*Math.PI/5,2*Math.PI/5,.5*r,r,30,10)],o}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log("mounted"),this.setClipState(0)}},{key:"getIndex1",value:function(){return this.props.p1.state.index1}},{key:"getIndex2",value:function(){return this.props.p2.state.index1}},{key:"styleInstantly",value:function(e,t){e.classList.add("notransition"),t();e.offsetHeight;e.classList.remove("notransition")}},{key:"fadeToSolid",value:function(e){var t=this.colorRef.current.querySelector(".edge_inner");this.styleInstantly(t,(function(){t.style.backgroundImage="none"}))}},{key:"setClipState",value:function(e){this.colorRef.current.querySelector(".edge_inner").style.clipPath=this.clipStates[e],this.setState({clipState:e})}},{key:"makeGradientString",value:function(e,t){return"linear-gradient(90deg, ".concat(t," 0%, ").concat(t," 33%, ").concat(e," 67%, ").concat(e," 100%)")}},{key:"reset",value:function(){this.fadeToSolid(g.Default),this.setState({backgroundMode:y.Solid,color1:g.Default}),this.setState({color1:g.Default,color2:g.Default,backgroundMode:y.Solid})}},{key:"sweepForward",value:function(e,t,n){var o=this;if(this.state.backgroundMode==y.Gradient)throw new O("moveForward",this.state.backgroundMode);var i=this.makeGradientString(t,n),s=this.colorRef.current.querySelector(".edge_inner");if(s){this.styleInstantly(s,(function(){s.style.backgroundImage=i,s.style.backgroundPositionX="100%"})),this.setClipState(1),s.style.backgroundPositionX="66%";var a=function(){o.styleInstantly(s,(function(){s.style.backgroundImage=n,s.style.backgroundPositionX="0%"})),o.setState({backgroundMode:y.Solid,color1:n})};window.setTimeout((function(){o.setClipState(2),s.style.backgroundPositionX="0%",window.setTimeout((function(){o.setClipState(0),window.setTimeout(a,700)}),300)}),300)}}},{key:"render",value:function(){var e,t=this.top,n=this.left,o=this.length,i=this.angle,s={top:t,left:n,width:"".concat(o,"px"),transform:"rotate(".concat(i,"deg)"),borderWidth:"0px",borderColor:this.state.color1},a=this.state.color1,r=this.state.color2;return this.state.backgroundMode==y.Solid?e={backgroundColor:this.state.color1}:this.state.backgroundMode==y.Gradient&&(e={backgroundImage:"linear-gradient(90deg, ".concat(a," 0%, ").concat(a,")33%, {color2}67%, ").concat(r,"100%")}),e.clipPath=this.clipStates[this.state.clipState],Object(m.jsxs)("div",{ref:this.colorRef,className:"edge",style:s,children:[Object(m.jsx)("div",{className:"edge_arrow"}),Object(m.jsx)("div",{className:"edge_inner",style:e})]},"vertex"+this.props.p1.state.index1+"/"+this.props.p2.state.index1)}}],[{key:"default",value:function(e,t){return new n({p1:e,p2:t,backgroundMode:y.Solid,color1:g.Default,color2:g.Default})}}]),n}(s.a.Component),T=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(u.a)(this,n),(o=t.call(this,e)).onclick_editmode=function(e){o.props.up.set("editmode",e.target.textContent.toUpperCase())},o.onclick_mode=function(e){o.setState({mode:e.target.textContent.toUpperCase()}),o.props.up.set("mode",e.target.textContent.toUpperCase())},o.onclick_runmode=function(e){o.props.up.set("testmode",e.target.textContent.toUpperCase())},o.onclick_run=function(e){o.props.up.run()},o.onclick_speed=function(e){var t=(o.state.speed+1)%3;o.setState({speed:t}),o.props.up.set("speed",t);var n=.5-.12*t-.03*t*t;document.documentElement.style.setProperty("--transition-time",n+"s")},o.state={mode:"EDIT",speed:1},o}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"guiOuter",children:[Object(m.jsxs)("div",{className:"guiCategory guiEdit "+("EDIT"==this.state.mode?"":"disable"),children:[Object(m.jsx)("div",{className:"clickElement",onClick:function(t){return e.onclick_editmode(t)},children:"New"}),Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_editmode,children:"Delete"}),Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_editmode,children:"Connect"}),Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_editmode,children:"Set Start"}),Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_editmode,children:"Set Goal"})]}),Object(m.jsxs)("div",{className:"guiCategory guiMode",children:[Object(m.jsx)("div",{className:"clickElement clickMedium",onClick:this.onclick_mode,children:"Edit"}),Object(m.jsx)("div",{className:"clickElement clickMedium",onClick:this.onclick_mode,children:"Test"})]}),Object(m.jsxs)("div",{className:"guiCategory guiTest "+("TEST"==this.state.mode?"":"disable"),children:[Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_runmode,children:"DFS"}),Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_runmode,children:"BFS"}),Object(m.jsx)("div",{className:"clickElement clickImportant",onClick:function(t){return e.onclick_run(t)},children:"Run"}),Object(m.jsx)("div",{className:"clickElement",onClick:this.onclick_speed,children:"Speed: "+this.state.speed})]})]})}}]),n}(s.a.Component);!function(e){e[e.SweepForward=0]="SweepForward",e[e.SweepBackward=1]="SweepBackward",e[e.Fade=2]="Fade",e[e.FadeVertex=3]="FadeVertex",e[e.Wait=4]="Wait"}(w||(w={}));var C=function(){function e(t){Object(u.a)(this,e),this.size=void 0,this.edgeInfo=void 0,this.edgeInfo=t.map((function(e){return e.map((function(e){return e.getIndex2()}))})),this.size=t.length}return Object(d.a)(e,[{key:"fadeVertex",value:function(e,t,n){return{frames:[{time:e,index1:t,color1:n,animationType:w.FadeVertex}]}}},{key:"runDepthFirstSearch",value:function(e,t,n,o){var i=this;if(!this.edgeInfo[t]||t<0||t>this.size)throw Error("fill in");var s=[t],a=[this.fadeVertex(e,t,o)],r=[];!function t(n,a,r,l,u){i.edgeInfo[n].forEach((function(i){var d=[].concat(Object(c.a)(l),[i]);if(s.indexOf(i)<0){s.push(i);var h={frames:[{time:e,index1:n,index2:i,color1:o,color2:g.Red,animationType:w.SweepForward}]};r.push(h),i==a&&u.push(d),t(i,a,r,d,u)}}))}(t,n,a,[t],r);var l=r[0]||[];a.push(this.fadeVertex(e,t,g.Green));for(var u=0;u<l.length-1;u++){var d={frames:[{time:e,index1:l[u],index2:l[u+1],color1:g.Green,color2:g.Red,animationType:w.SweepForward}]};a.push(d)}return console.log(l),a}},{key:"runBreadthFirstSearch",value:function(e,t,n,o){var i=this;if(!this.edgeInfo[t]||t<0||t>this.size)throw Error("fill in");var s=[t],a=[this.fadeVertex(e,t,o)],r=[];!function t(n,a,r,l,u){var d=[];i.edgeInfo[n].forEach((function(t){var i=[].concat(Object(c.a)(l),[t]);if(s.indexOf(t)<0){s.push(t);var h={frames:[{time:e,index1:n,index2:t,color1:o,color2:g.Red,animationType:w.SweepForward}]};r.push(h),t==a&&u.push(i),d.push(t)}})),d.forEach((function(e){t(e,a,r,[].concat(Object(c.a)(l),[e]),u)}))}(t,n,a,[t],r);var l=r[0]||[];a.push(this.fadeVertex(e,t,g.Green));for(var u=0;u<l.length-1;u++){var d={frames:[{time:e,index1:l[u],index2:l[u+1],color1:g.Green,color2:g.Red,animationType:w.SweepForward}]};a.push(d)}return console.log(l),a}}]),e}(),I=1e3;Promise.prototype.delay=function(e){return this.then((function(t){return function(e,t){return new Promise((function(n){setTimeout(n.bind(null,t),e)}))}(e,t)}))};var M=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(u.a)(this,n),(o=t.call(this,e)).settings=void 0,o.mouseDownVertexId=-1,["addVertex","deleteVertex","updateSetting","addEdge","deleteEdge","run"].forEach((function(e){o[e]=o[e].bind(Object(h.a)(o))})),o.state={vertices:[],edges:[],settings:{mode:"EDIT",editmode:"NEW",testmode:"DFS",speed:1},start:0,goal:-1},o.mouseDownVertexId=-1,o}return Object(d.a)(n,[{key:"updateSetting",value:function(e,t){var n,o=this,i=(n=this.state.settings,JSON.parse(JSON.stringify(n)));Object.assign(i,Object(l.a)({},e,t)),this.setState({settings:i},(function(){console.log("Update set on prop ".concat(e,": ").concat(o.state.settings[e]))}))}},{key:"componentDidMount",value:function(){I=window.innerWidth}},{key:"setStart",value:function(e){var t=this.state.start,n=this.getVertex(t);n&&n.setState({isStart:!1}),this.setState({start:e}),this.getVertex(e).setStart()}},{key:"setGoal",value:function(e){var t=this.state.goal,n=this.getVertex(t);n&&n.setState({isGoal:!1}),this.setState({goal:e}),this.getVertex(e).setGoal()}},{key:"onmousedown",value:function(e){var t=n.interpretMouseEvent(e),o=t.x,i=t.y,s=t.hitSpacer,a=t.hitVertex,r=t.id,c=t.validLocation,l=this.state.settings.mode;if("EDIT"==l)switch(this.state.settings.editmode){case"NEW":c&&!s&&this.addVertex(o,i);break;case"DELETE":a&&this.deleteVertex(r);break;case"CONNECT":a&&(this.mouseDownVertexId=r);break;case"SET START":a&&this.setStart(r);break;case"SET GOAL":a&&this.setGoal(r)}else"TEST"==l||console.log("unknown board mode")}},{key:"getAllVertices",value:function(){return Object(c.a)(this.state.vertices)}},{key:"getAllEdges",value:function(){return Object(c.a)(this.state.edges.flat().filter(Boolean))}},{key:"getVertex",value:function(e){return this.state.vertices[e]}},{key:"getEdge",value:function(e,t){return this.state.edges[e][t]}},{key:"getStart",value:function(){return this.getVertex(this.state.start)}},{key:"getGoal",value:function(){return this.getVertex(this.state.goal)}},{key:"onmouseup",value:function(e){var t=n.interpretMouseEvent(e),o=(t.x,t.y,t.hitSpacer,t.hitVertex),i=t.id,s=(t.validLocation,this.state.settings.mode);if("EDIT"==s)switch(this.state.settings.editmode){case"CONNECT":if(o){var a=this.mouseDownVertexId,r=i;this.addEdge(a,r);break}}else if("TEST"==s)return}},{key:"addVertex",value:function(e,t){var n=this.state.vertices.length,o=this.state.vertices,i=this.state.edges,s=k.default(n,e,t);return o.push(s),i.push([]),this.setState({vertices:o,edges:i}),s}},{key:"deleteVertex",value:function(e){var t=this.state.vertices,n=this.state.edges;t.splice(e,1),n.splice(e,1);for(var o=t.length,i=function(o){t[o].decrementIndex(),n[o]=n[o].map((function(t,i){return t.getIndex1()>=e?n[o][i+1]:t}))},s=e;s<o;s++)i(s);this.setState({vertices:t,edges:n})}},{key:"addEdge",value:function(e,t){var n=this,o=this.state.edges,i=o[e];void 0===i[t]&&(i[t]=E.default(this.getVertex(e),this.getVertex(t)),this.setState({edges:o},(function(){console.log("new edges area: ",n.state.edges)})))}},{key:"deleteEdge",value:function(e,t){}},{key:"renderVertices",value:function(){return this.state.vertices.map((function(e){return e.render()}))}},{key:"renderEdges",value:function(){return this.state.edges.map((function(e){return e.map((function(e){return e.render()}))})).flat()}},{key:"animateStep",value:function(e,t){var n=this;return Promise.all(e.frames.map((function(e){return n.animateStepEntry(e,t)})))}},{key:"animateStepEntry",value:function(e,t){var n=this;switch(e.animationType){case w.SweepForward:return new Promise((function(o,i){n.doSweep(t,e.index1,e.index2||0,e.color1,e.color2||"something has gone wrong"),o()}));case w.FadeVertex:return new Promise((function(t,o){n.fadeVertex(e.index1,e.color1),t()}));default:return Promise.resolve()}}},{key:"animateSteps",value:function(e){var t=this;e.reduce((function(e,n){var o=Math.max.apply(null,n.frames.map((function(e){return e.time})));return e.then((function(){return t.animateStep(n,t.state.settings.speed).delay(5*o/3)}))}),Promise.resolve())}},{key:"reset",value:function(){this.getAllEdges().forEach((function(e){return e.reset()})),this.getAllVertices().forEach((function(e){return e.reset()}))}},{key:"run",value:function(){var e=this;console.log("VERTICES",this.state.vertices),console.log(this.state),this.reset();var t,n=new C(this.state.edges);console.log(n);var o=500-200*this.state.settings.speed;if(!(this.state.goal<0)){switch(this.state.settings.testmode){case"DFS":t=n.runDepthFirstSearch(o,this.state.start,this.state.goal,g.Black);break;case"BFS":t=n.runBreadthFirstSearch(o,this.state.start,this.state.goal,g.Black)}Promise.resolve().then((function(n){return e.animateSteps(t)}))}}},{key:"fadeVertex",value:function(e,t){this.getVertex(e).fadeTo(t)}},{key:"doSweep",value:function(e,t,n,o,i){var s=this.getVertex(t),a=this.getVertex(n);console.log("sweep vertices",{v1:s,v2:a});var r=this.getEdge(t,n);this.animateSweep(e,r,s.state.color,o),Promise.resolve().delay(.7*e).then((function(e){return a.fadeTo(o)}))}},{key:"animateSweep",value:function(e,t,n,o){t.sweepForward(e,n,o)}},{key:"render",value:function(){var e,t,n,o,i=this,s=null===(e=this.getStart())||void 0===e||null===(t=e.props)||void 0===t?void 0:t.p,a=null===(n=this.getGoal())||void 0===n||null===(o=n.props)||void 0===o?void 0:o.p;return Object(m.jsxs)("div",{className:"board",children:[Object(m.jsx)(T,{up:{set:this.updateSetting,run:this.run}}),Object(m.jsxs)("div",{className:"boardDisplay",onMouseDown:function(e){return i.onmousedown(e)},onMouseUp:function(e){return i.onmouseup(e)},children:[[].concat(Object(c.a)(this.renderVertices()),Object(c.a)(this.renderEdges())),Object(m.jsx)("div",{className:"start_box box",style:{display:s?"inherit":"none",left:(null===s||void 0===s?void 0:s.x)-37||0,top:(null===s||void 0===s?void 0:s.y)-37||0}}),Object(m.jsx)("div",{className:"goal_box box",style:{display:a?"inherit":"none",left:(null===a||void 0===a?void 0:a.x)-37||0,top:(null===a||void 0===a?void 0:a.y)-37||0}})]})]})}}],[{key:"isValidLocation",value:function(e,t){return![e,t].some((function(e){return e<55||e>I-5-50}))}}]),n}(s.a.Component);M.interpretMouseEvent=function(e){var t=function(e){document.querySelector(".board");var t=e.nativeEvent,n=t.target.getBoundingClientRect();return t.pageX,t.pageY,n.x,n.y,{x:t.clientX-n.x,y:t.clientY-n.y}}(e),n=t.x,o=t.y,i=(e.target,e.vertexId),s=M.isValidLocation(n,o);return{x:n,y:o,hitSpacer:Boolean(e.hitSpacer),hitVertex:void 0!==i,id:i,validLocation:s}};var V=M;var N=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"title",children:"Graph Editor by Justin Lee"}),Object(m.jsx)(V,{})]})};r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.f8c588f5.chunk.js.map